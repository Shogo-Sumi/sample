〇予想と回答


  予想
  図解はmdファイルに記載
  
・i1
  // 予想:
  // 1秒後に 42 が出力され、その後1秒後に42が出力される。
  //
  // 説明:
  // Promise.anyは1つでも履行されるとその結果をPromiseに返すため、v=100の処理は実行されないと考える。。

  回答
PS C:\Users\sumi6\javascript\github\sample\exercises\ch13\ex09> node index.js
42
100

1秒後に42が表示され、その2秒後に100が表示された。予想と反する結果になったが理由がわかなかった。

・f2
  // 予想:
  // 1秒後に C が出力され、その1秒後(開始から2秒後)に、Bが出力され、その1秒後(開始から3秒後)にAが表示され、その直後にVが表示される。
  //
  // 説明:
  // Promise.allはすべてPromiseが完了するまで待つため、C,B,Aの出力後Vの結果が表示される。。

回答
PS C:\Users\sumi6\javascript\github\sample\exercises\ch13\ex09> node index.js
C
B
A
[ 'A', 'B', 'C' ]

予想通りの結果に見える。

・i3
  // 予想:
  // 1秒後に errY が出力され、その後Vの値42が出力される。その後に3秒後に、Vの値42が出力される。
  //
  // 説明:
  // Promise.allは1つでもRejectedが返ると即座にエラー処理に移るため、errYが実行され、その後logVが実行され、3秒後に再度logVが実行されると考える。

回答
PS C:\Users\sumi6\javascript\github\sample\exercises\ch13\ex09> node index.js
Y
42
B
0

errYが実行され、その後logVが実行されたが、次の処理がBの値が実行されて、V＝0が出力された。
2回目のlogVが実行されるまでのwait3の待ち時間の間に、logBの処理と、V=0の処理が実行された？

・i4
  // 予想:
  // p2のfor文が最初に実行される。その後、p2のwait2が実行される。p2のwait2が実行中にp1のwait1,for文の処理が完了する。
  // その後、p1のwait2の処理が実行される。p1のwait2の実行中に、p2のwait2が完了し、v=nextが実行される。
  // その後p1のwait2が完了し、v=nextが実行される。
  //
  // 説明:
  // p1,p2の処理がそれぞれ独立して実行される。先にp2のv=nextが実行され、v=5となり、その後p1のv=nextが実行され、v=5が実行される。
  // よって出力Ｖは5となる。

回答
PS C:\Users\sumi6\javascript\github\sample\exercises\ch13\ex09> node index.js
5

予想と同じ結果と考える。

・i5
i4について、v=10となるようにソースコードを変更したi5の実行結果を記載する。

PS C:\Users\sumi6\javascript\github\sample\exercises\ch13\ex09> node index.js
10

p2の処理を先に完了させて、v=5が確定した状態で、p1のv=nextが実行されるように、
p2のソースコードのawait wait2();をコメントアウトした。
v=10の実行結果が得られた。
